require("dotenv").config();

const express = require("express");
const cors = require("cors");
const apiRoutes = require("./routes/api.routes");
const { encryptData, decryptData } = require("./utils/encryption.utils");
const { decrypt } = require("dotenv");

const app = express();
const port = process.env.PORT || 3000;

app.use(cors());
app.use(express.json());

app.use("/api", apiRoutes);

app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).json({
    success: false,
    message: "Something went wrong",
    error: process.env.NODE_ENV === "production" ? null : err.message
  });
});

console.log(encryptData({
  "p_UnitId": 1234,
  "p_CompanyId": 5678,
  "p_StartDate": "2025-01-01",
  "p_EndDate": "2025-12-31",
  "p_ARR": 25000.50,
  "p_FGMOS": true
}));
console.log(decryptData("24fe75001d9b11e1355bd2a9c986d3db725cc4b1a51609e37a919f1d24b96326df1be1530d7a0402e21f80ee425b88a8ccef4430039b0e009354984628b8d25d4776de82b6978e68c846d798b84dfe68e5d0bd8b0e737119bef4c58a3e11872ee8727a6e781e87385a409eff823e8805e7f812779109aa928de51d5ccd75479cf69920847137eafeea37eefb82635f1ba802cba5d3db783b8728ca02a9e378f6d7b93417e1a8c568c837aad35030ab7a9eee782829274bafc2a9a1d430ee99730b2e662908105d4b7a12b0dae74bc15083731bab2dd7c0570a0fea23ebae0baf4d1e3842cab5965a19cd2cadf6a2ade925c083ff161aa0153f4ccc454dd561f66259b86c280cb6191262f05a91a5b76a55ed730505f799e05b92983d47bb70f9ea8599db527f721f639c87b0b2a2ffa350e646e5873c9a95bba8da35568a6ecafbc301530e896e3435ad3322d7a6b68b3c834dbf4423614cdd1195948622303ee16dc3a7ce9ca0701b5f04c1a3b36d1c2a61d979a92792046e823c50654bded517d9297a95c83e444880aef6dfabb3a4f9ed9988a8ec60b74b8360e384a1b12d03cef6b64ce028b862f2e0ddee250542f9630a0a47533e3e73dab96a07a9520901b6df645e252c131bc8bfefd7812e79ea58fb0ee849d19d31b30baabc41bf704f935ddc66bddfbb4ec5e316fe7e7bd805e67f11742f59702ddc864be91cabfde8a042b12c2186031362db867ccbd3f90df9fe3cafbc074228b383030be11e8eb5dcb5f23f0a6a0e988ce4841478c61fcff1184c45997d13522668d6b56ec4f978794ae61519148d75abac3221bf3c4ff340e70a868dc302f011abe38815b6e26a19c0e8fa322d299062ee4f0f4b3550136dfaf5fc193267c0c8899c9bfeb7cc9a4c237d6549bb3ec5bb9b2904cee9d05ae5746b74d1920d461f91b5ab2725c0f4c6e35c69b815adeb4afc8694f392dfbbacfe7fb3b780f5deb394387478f4db8c72a353914570a87dc1ab21fffdd5fc8c62db0f065b72bf7b0f868084647b813f5905ee101d1365465be981edb1e73a23e23b06e46c6a99841ad7451f82197a435b83c32f11f88e1785da3f333e16b711d8ff576995d24a5d8cd27299b178e41e701f572b9722b02679edee08f7d4c0c658a6f8c46f2a4975f1cce459b6c0bad1448bb45f5e25e47f48a8e341d3c2c84df8d0f0dd6e0c493552d44481a271af944f0b9a55fa7a15fa88782e3addd908ab957356194b79de0bba4d9a94fc253220568a11b09647b8192be90abeebedd4329fe6e23496a0ae4178433460b0529d2c275d5b82d7ea009aa64fad9a06683c2f4d53e4529024caebb4035423b7fdd5c1130bf133ed53af240b89b04ff97b034f72b2e7889838eb3d4f89be7d73724f27c566110cfbeda9945c40632bb353f6b10abaf3b90f2b344622f6b270fba559e79a1a521a18b28ac4765d27cb4e6f4262615b3d031c1aa22c6558e2a387e7a4588e41fce8afa13d8cde1693ba997d6051654a5d2f1e05a154893e090e631c76d4323bcce19953f7ce5da1d18917fa68c6ff2eb88eaec7ce8d805fd3233f395e9a4d5ddbdc3af397a87240b82ae18a437172f02a2459609651a4a91c5b00bdf124954b6a18024767b737df27e07c9b88d1036a3e14c5f45e24f4c8ef04d057e22c1bbdada59ad5b70729edbc71b2c9617d767e9a5655bf720428cb6254f2aa915c31dfaf306fe3c2d4abebc84b91633cd250d4e207ca25fa619a0c6208e3f4051eaf282ff41ad70abd3b1126252ea3bfbef5a506ad89d9ae32dcbe3ef1baf825ca959f6a6ba90bcdd47eb89f76358e72718dabcdcbd6a7b6438658f2dc42a709e3e3c15501897bd66e8dfdbd8289ce79e2ec3d9da65fce15e68cdd49ea523f43bfbcf97f6c41f47904de4483dedbe4385fff1e100a01b769d5d6bd3b4cea3ec3ebe6b264f250526b9472ece18197365e75e7dcdd874a81470445c72fdbefb2838f42a817d453b4c51d3ef2ab622d110d4a8913449086f86344f8acb4fb425b3bb80446a9473a11bf6a403b2112aa383ed06a8905c3bd82246e259b2749ba4b74d65cf02a5ef697404cadb121a6ed6817547d4a80b714dc9ac4b0d019b9f7c0484b87438f2eef61ff7a555b0a132274a740aa5955cf89d7f686d15841ee79433e714ef36e813f84255c8883104fc6c05f0cca3627577974e38190b4d0aa4792f94de4019f250dba5b46e34ff83e00a944d0e331b38ea064806358f2c4a0f03896ff79d523529264f79fff95fbe35ef669ac091069d2c8c83ab7cbe4e1f52dbf2810026e1441ea1ad5b80cc20b7c7708a7278299d4b42fca49509a705e1d19c1fc0bd668c7a88cccd4f465cf85fdccd291d26c4835f65687930daa30614a3d255872b6c4ef0eabb78044e085def575cb8fe42ca3bd394069df950f229c4adacb85f186c28a066871b1e4942c11c377376770f1e23d963864760bf71cfecb23734d0a380e5a423c327928ca1b0c1fce22083aa661c47b2f956b231533366b183fc25215da68b5a491633bd4bf29a1462630d38775b6b2be4e7b888382d96067423e85ef296b303e0915942cd243ea6ba166ce01354dda7e05aeb21ba49ed581b2b3cf376b0de8b057a4cb7fccb9e2f8b3a3e8fb5fbf8dd0da597fea3b9990db52611a2f38299f66e65f7c5179b33af2297c4a95971170e6b7608978e19cb6eb70d49497091a1d3f9b42656686636590b3afa511b85e1ed0c4f3fc33c9b27aa815af5ee8b0ad322b4d3190b3c7461af0dca89116b799761e2c9e96160d6097eba4b04bc0319daa8e15d9714c7c46b04324fe9841c4f404b16dc279715e437c76f25ca2477667fb5960703432b79ab49ba1f644dbc052ba63c19126e02f98ef32024f7abf540ca352cc412e0ec2349771c95ea66487dd4db60bd3532d33ded98511a8e4654b45086d1e0518c11264a8facc4548cfc014e034eb2369de8472385a1915851661704bee1772d3ce5e6df1b9c8cca1842dc31d5600d5b107ec828afb477bf9ce1f6c04a0e353349c7743e55ebca70bac72d7f519dc9a6b0d71941a7f2f0d9ca75909f0bceaf01708c374eed2c5bdc89b8a5e74c02336b639708801865d73659bf3fb8de898da9279a0d85d9dd622e33d5008dc630501acf3b494763049b247b13804da4ac8b5c40a3cc006c3dd9cb09ba67f425afd4f6cd34cce082fc074f4e98f0aa1dbf2af7ba881499380e822e1dd8730b6e6ee74d040e008608128f2116bf48326fe99ce0e9bcf72d2707654aaba782c0ad375380ba1cee48dc45974da01cf06b662c6dc42d01a4191ad6315ff816294878c1478120997ed81ce02d16ad5f1e38d3ab87e64772bb761ee57a31d197eae554522183717fc75f15762a74690eb1fda6d4e8e6b4d1fe01be1d44cb5da23438eb88bdb1344e1fe1d2f8617e6916cc7b33e403005946234b93455b7e978b59e44be243d2ae3c1a828c2f0e28c5d69684bbfe2841a4c56b1a085de013df6dd6f54fffe3e6cf135f55dbe779be67d31b295a2be5ca14e6d877194246a2fd664c44dd198eaf9df33eb7cc37b592822dc6024fa45258d33f3999fdf8f99ca6acc337c95fcf6cbfcb7c5348026e67d8ab07bbad36253349bee21d8e2fb9db1cfe3336f81a72c4574f94b372578328fcc7ca20839bfb2c35f34863abd0911f91b7c9325e25d3964481c0f979e806fd4c34742644aea1af8f8c445b4d4eeb87fb9c9811440504bfa56247b0f9370ee6b35aea8adb4c637bd3996124baea676b9dc396c22eead199c9d77e603d97389f5e370fdaf32a76ba9d686795d59fa3e9a7ed7a9575822aa336fb31deb79af0d69af98c690c2f57b2fd20997218e1f26ff12083c3d25f20d112ffdae6cbc5b8c22ad29918c7cdc2c68e66fa77ab1146726c2324547423227f5f0eb4828fa50bb3f7f130aad64d6532aada2f1d347a4ed08fbefe5a1dfb42eb92fc2aefdab687c0fc3a05d2b45a428de98200a6f4a62210594c5e43128cb368cbe1af05d6477588e32d3492d6eacea04b101f1bde2dfed09e4fe1308272eddc52e89af882745b8a73467e8eadc9f65f95aa32a0b010a909c96b58aea66baf65e43bb89c879b20e384fba6e9e61ed8f21f1cd80087ad0c981396c0130119fe7fd9922a60c3a385280f91411546d6ffec33430e6e18e872993a7ed42bacfc8b452c358f419126e5e803075a71009026bfae524cb32464060106bbe8a6efd235129acd938da5f04b42ea6fa1ab580d299b0e3d0a965ec97376f7e5ea17dcf44eb96f853bad6418b6270ce6d79e4c1eaded2d6fbc3981fbe5a5d0a63781397d51e9db85aad7f380dd3d8a87d67c4b8f2d0634f5e62f3b90aa2a2e962bbdaedf63562221f9b839ce74f6bac832b84fd85dab150a7aa0e2d36214847cbf021d22d5d657bba23f3a2d1591123e54253bf5671c4400b4718e092cf7b77b6ee6c6b5dc53d4656e8dd5b293f92a651ca3ea41f5637baa3b1ed44795a11b1998dceb57a4798c87c18a6a79573f5a639e192babdc572629b09871fecf97d0f33808ed58fa264862b38cf0a2db7498e5567cf361fbeb6da9a29cc94b0ac30165b0d11efcfe3312cb486a00f2c2de5566f74817059939da94f76f34ddcb022bbe09eb64c9c4aaca8f63967afd4fad38664027cdaf52166abf359ed04a54fbdbf8ceeedebefc488357a9489b022429721011aa0a3d1ef2ccc30721764ac914f909cb1b88bbe4683d726d0782785002f86eb6e8e3e6823b856136214a5cd7cb0c2d4fd99b3cccaf5401e80625d307406a35c212fda6a74a81c514588bb7c6f897f214c5482020a69337c6b5bb81881ba1e967c8768748482235172faa9c58813b28f251d604912b518e40a7e55b47319165b49438b21d8a620833eb730ee304fa006e765bb4d1f482f7f1b3d2b92866596830d1a8d9c5f9f16f336f97f223df167fc038ef3bb461405479b428022e6caa048c769662c066dc00d6c28fde39731576a6644597939768cc770441f09afe07b008bfb116759fa6c9f2e744cf6f1479b7667d1006457cff04a7abc3fa2a2aeb5741e246332f18f61722bef8a256e74f16f8be0e32de2d0557bc9f744daf9d074d2301e1dcbd85abffac8492851b943751cfcca096dd68737c8bbc57363119119fd95c0316c201b1382ede14b54746aef9924d2e4f2a5375c6b07e69a59800d9c65c3ac3cde89f343edda0b812cc53c3f55c99e05759e0e6536ff9e6b38300573ab851af0f1401d2d6e857461b7a49a97cb80545b6a6256ce3a3ad2079eb77856faeff7670579a677e227e3a1f634782dd77943aed77b69e3fe4589fe8d525be3711684a69893aeade60887e51302b98b382657c4ec578603ec5699da3cfda0ad43dd14db7f86523a818cf17ceaf1a3654b96f004ddfda8781d25ad1e0ad7ef8d35980b0a92b5f6fc0b58f4760d49121fa7ccaa09ff89aa8a80ee69dc27594870e75186abd95f2dc5e6da1500feb898eda08b49feb8426ceaffc11e8400d40dab7d738aaecf7150d95fbd6fa2ec1840fbacbf5614a5050b80f7320b0146d067fb66de186569c5aec78a319fdd042198fce0f30c483c7820aad7fe0274f1020f809e5a8c7c462405b08fc397c41ab28218154e284d0e3df24f53ba8647c9aa0523a9c2c28890e89751089a64ee4c880e5c6fd573ddf1c246eb6c1f2cf900c1c7b36e2e41264134de855cbeaf6ec5cfbb5e0e1b825c684cac705e886e93a78048b5469887afd758491dea992252a0f1f61419496440754de2d39c03012284237ec4aa4b280e5094cf99a73f68e4d963bae676449414bf2e289d3051836a933c841cb5b66b6f99fe45ddd369669c985812702957dcd2841cff15da21294df9d600042a5cecf0f349e22dda15083cd4ac502f6c33f61ec0f92f88ca335b5487e43ae6f81256e6cc50c7029bbc4d2b5b79b7553e77c5d5927807978d7dd7336e4bd9edacd06721183c067ec33dddf0a6b1372603649ff69975c5a571fb1208ff1daad2556b19da7526933af8628346fe679d4bfe4e7c6548d47ec14db6e2ee28bbfe0e92dfd848c28de820f524cb6f946a9fedbc444ea9ce6eea1eee06a45ec464d793db9ab36b5ab9a9af88ec3d732a6639c499c15038d5343781b1649a3943138797c1bb66c8d2af4931a3e3fc44d7b9387fbd29cc7a3264318be392d37c67b200f1cbcd55cfaf2592ddc91c05cb5791c695e841de8aa26f8d5e8f684861475700ba019b2c0326df7ad099e6978d3bbeb393e5929714f0c29e6df6f36b72bffc83dfa92fb0b43ee7c6d2d44cf9321bb51b2532a04c52d7fbfe79d691bfd0b2d18e780ce9470e07f95a4df3be41432e436b6b35087c82829603f742e4ff176106c3c78ceb3b1c7301662eddeb6cd5ced8b98e1ac6870702bc7e8f58e5126b7657ea554a8ba0b7a6491695dd163d12eaff4f64d9941cdc188fd4354bb56ef88728d1a28fe9ae9eb57e88358815da0ea8b29ba2dd554cc39bea635426d735c849e75210bbc53e65771784bb8ab00077703e4828a2314537af39c0d95e64238c1fc875975c988719c5668c10b68128f9c8b4e5d8e95936f721266ad0cdbfff2bed986e3e6773fd8708c5946a6084a31e2336d12ca55e729a51a92c8974c5b5a89d9f"));
app.listen(port, '0.0.0.0', () => { // Listen on all network interfaces
  console.log(`Server running on port ${port}`);
});